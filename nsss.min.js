function createStrokeRouter(e){function t(e,t){var n=e;return t&&(n=t.reduce(r,e)),n}function n(e){var t=[];return e.metaKey&&t.push("meta"),e.ctrlKey&&t.push("ctrl"),e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),t}function r(e,t){var n=e;switch(t){case"meta":n+=1e3;break;case"ctrl":n+=1e4;break;case"shift":n+=1e5;break;case"alt":n+=1e6}return n}function i(){this.sourceSelection.on("keyup",this.onKeyUp.bind(this)),this.sourceSelection.on("keydown",this.onKeyDown.bind(this))}var o={sourceSelection:e,keyUpRespondersForKeyIds:{},keyDownRespondersForKeyIds:{},enable:!0,stopPropIfResponderFound:!0,absorbAllKeyUpEvents:!1,absorbAllKeyDownEvents:!1};return o.keyCodesForNames={backspace:8,tab:9,enter:13,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,equal:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,openBracket:219,backslash:220,closeBracket:221,singleQuote:222},o.routeKeyUp=function(e,n,r){var i=t(this.keyCodesForNames[e],n);this.keyUpRespondersForKeyIds[i]=r},o.routeKeyDown=function(e,n,r){var i=t(this.keyCodesForNames[e],n);this.keyDownRespondersForKeyIds[i]=r},o.unrouteKeyUp=function(e,n){var r=t(this.keyCodesForNames[e],n);delete this.keyUpRespondersForKeyIds[r]},o.unrouteKeyDown=function(e,n){var r=t(this.keyCodesForNames[e],n);delete this.keyDownRespondersForKeyIds[r]},o.onKeyUp=function(){if(this.enable){this.absorbAllKeyUpEvents&&d3.event.stopPropagation();var e=t(d3.event.which,n(d3.event));e in this.keyUpRespondersForKeyIds&&(this.stopPropIfResponderFound&&d3.event.stopPropagation(),this.keyUpRespondersForKeyIds[e]())}},o.onKeyDown=function(){if(this.enable){this.absorbAllKeyDownEvents&&d3.event.stopPropagation();var e=t(d3.event.which,n(d3.event));e in this.keyDownRespondersForKeyIds&&(this.stopPropIfResponderFound&&d3.event.stopPropagation(),this.keyDownRespondersForKeyIds[e]())}},i.bind(o)(),o}function createMerchmaker(){var e={randomObjectsBaseURL:"http://api.wordnik.com/v4/words.json/randomWords?hasDictionaryDef=false&includePartOfSpeech=noun&excludePartOfSpeech=proper-noun&minCorpusCount=500&maxCorpusCount=-1&minDictionaryCount=1&maxDictionaryCount=-1&minLength=5&maxLength=-1&api_key=4127d30929863bfd6f00b0bf4f805a04980240ddbe2fa0a1d",fallbackObjects:["sweatpants","corn syrup","toilet paper","pipewrench","karate manual","hand sanitizer","sandwich","car battery","grappling hook","harmonica","interior flat paint","milk","mayonnaise"],units:["five-gallon drums","gross","baker's dozens","six-packs","baskets","pcs.","pre-inspected containers","things","refills","variety packs","of them","big ones","hatfuls"],adjectives:["firm","slightly irregular","industrial-strength","cat-friendly","chewy","odorless","economy","deluxe kind","family-size","travel size","shatterproof","refurbished","professional-quality","rechargeable","women's","children's","men's","inflatable","flame retardant","homeopathic","natural","gluten-free","all-wheel drive","hypo-allergenic","convertible","unflavored","special edition","individually wrapped","solid state","Brooklyn-style","elastic waist","high-performance","uncut","bake-n-serve","vegan","fully articulated","blue","vintage","locally grown","petite","fully automatic","lemon scented","free-range","assorted","fleece lined","wi-fi ready","four color","five pocket","extended release","basic","professional","chewable","salted caramel","aerosol","original formula","gentle","complete","extra pulp","washable","oil free","indoor","Swedish","soft","hardcore","vat-grown","plain","hand-cut","new-to-you"],banners:["bonus","gift with purchase","sale","limited time","best seller","new","back in stock","special edition","reduced for quick sale","buy 1 get 1 free","9 for the price of 8"],encouragement:["YISS","Yiss!","That's right, son!","wow such deal","Do it!"],buzzkills:["Negro","Negroes","chink","chinks","gook","gooks","nigger","niggers","spic","spics","rape","rapes","rapist","rapists"]};return e.makeItems=function(e,t){function n(n,i){if(n){console.log(n);for(var o=0;e>o;++o)r.push(this.makeItem(utils.pickFromArrayAtRandom(this.fallbackObjects)))}else r=i.map(this.getWordFromObject.bind(this));t(null,r)}var r=[];utils.makeJSONRequest({method:"GET",url:this.randomObjectsBaseURL+"&limit="+e,timeLimit:2500,done:n.bind(this)})},e.getWordFromObject=function(e){var t=null;return t=this.makeItem(-1===this.buzzkills.indexOf(e.word)?e.word:utils.pickFromArrayAtRandom(this.fallbackObjects))},e.makeItem=function(e){var t={id:"i"+utils.randomId(8),thing:e},n=~~(5*Math.random());if(3>n){var r=utils.pickFromArrayAtRandom(this.adjectives);t.adjective=r,t.postfixAdjective=n>1}0===~~(2*Math.random())&&(t.quantity=~~(50*Math.random())+1,t.units=utils.pickFromArrayAtRandom(this.units));var i=t.quantity?t.quantity:1,o=~~(100*Math.random());return t.cost=70>o?(30*Math.random()*i).toFixed(2):90>o?((70*Math.random()+30)*i).toFixed(2):99>o?((400*Math.random()+100)*i).toFixed(2):((9500*Math.random()+500)*i).toFixed(2),t},e}function createRouter(){function e(e){for(var t={},n=2;n<e.length;n+=2){var r=null;n+1<e.length&&(r=e[n+1]),t[e[n]]=r}return t}var t={moduleCache:{}};return t.direct=function(t){var n="",r=t.split("/");r.length>1&&(n=r[1]),n||(n="index"),this.directWithOpts(n,e(r))},t.directWithOpts=function(e,t){var n=this.moduleCache[e];if(!n){switch(e){case"all":case"checkit":default:e="all",n=createItemsModule()}this.moduleCache[e]=n}n.opts=t,n.render()},t.respondToHashChange=function(){this.direct(location.hash)},t.syncURLToModule=function(e){var t=location.protocol+"//"+location.host+location.pathname+"#/"+e;window.history.pushState(null,null,t)},t.init=function(){this.direct(location.hash),window.onhashchange=this.respondToHashChange.bind(this)},t.init(),t}function createAmazonSearch(){var e={amazonSearchURL:"http://192.241.250.38:3001/"};return e.searchProducts=function(t,n){function r(e,t){if(e)n(e);else if(Array.isArray(t)&&t.length>0){var r=t[0];"Got"===r.status?n(null,r.value):n(r.status)}else n("Bad response from API.")}var i=[[{id:"searchOp",op:"searchAmazon",params:{Keywords:t.thing}}]],o=utils.makeJSONRequest({method:"POST",url:e.amazonSearchURL,body:JSON.stringify(i),timeLimit:3e3,done:r});return o},e.spacedOutSearchProducts=utils.space(e.searchProducts,1e3),e}function createFlickrSearch(){function e(e){return"http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=b10e91fcff639f811ac600afb98308f9&text="+e+"&license=1%2C2%2C3%2C4%2C5%2C6%2C7%2C8&per_page=3&format=json&nojsoncallback=1&"}function t(e){return"http://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key=b10e91fcff639f811ac600afb98308f9&photo_id="+e+"&format=json&nojsoncallback=1"}var n={};return n.searchImages=function(n,r){function i(e,n){var i=null;if(e)r(e);else if("ok"!==n.stat||n.photos.photo.length<1)r("Couldn't find image. Status:",n.stat);else{var a=utils.pickFromArrayAtRandom(n.photos.photo);-1!==a.title.indexOf("Bristol Street")?r("Filtered spam image."):(s.imageAttribution="http://www.flickr.com/photos/"+a.owner+"/"+a.id,i=utils.makeJSONRequest({method:"GET",url:t(a.id),done:o,timeLimit:3e4}))}return i}function o(e,t){if(e)r(e);else if("ok"!==t.stat)r("Couldn't get image. Status: "+t.stat);else{var n=t.sizes.size[1];s.imageURL=n.source,r(null,s)}}utils.makeJSONRequest({method:"GET",url:e(n.thing),done:i,timeLimit:3e4});var s={}},n.spacedOutSearchImages=utils.space(n.searchImages,1e3),n}function createDraper(){var e={drape:null,docStrokeRouter:createStrokeRouter(d3.select(document))};return e.addDrape=function(){var t=d3.select("body");return e.drape=t.append("div").classed("drape",!0),e.docStrokeRouter.routeKeyUp("escape",null,function(){e.removeDrape(150),e.docStrokeRouter.unrouteKeyUp("escape",null)}),e.drape},e.removeDrape=function(e){d3.select(".drape").transition().duration(e).style("opacity",0).remove()},e.addCloseButton=function(t){var n=t.offsetLeft+t.offsetWidth,r=t.offsetTop,i=e.drape.append("svg").attr({width:64,height:64}).style({position:"absolute",left:n-32+"px",top:r-32+"px"});i.append("path").attr({d:d3.svg.symbol().type("cross").size(1024),fill:"#fff",transform:"translate(32, 32) rotate(45)"}).classed("shadowed",!0),i.on("click",function(){e.removeDrape(150)})},e}function createItemsModule(){function e(e,t,r){var i=e.selectAll(".item").data(t,accessors.id),o=i.enter().append("li").classed("item",!0).classed("new",!0);setTimeout(function(){o.classed("new",!1)},400),o.append("div").classed("picture",!0).append("a").append("img"),o.append("div").classed("description",!0),o.append("div").classed("cost",!0),r&&r(o),i.each(n),i.selectAll(".description").html(accessors.getDescriptionHTML),i.selectAll(".cost").text(accessors.cost),i.classed("darker-stripe",function(e,t){return t%2===0}),i.exit().remove()}function t(e){e.append("button").classed("share",!0).text("Share!").on("click",i),e.append("button").classed("buy",!0).text("Buy!").on("click",o)}function n(e){function t(t){t.url&&(e.buyLinkURL=t.url),e.imageURL||(e.imageURL=t.imageURL,e.imageAttribution=t.imageAttribution),r(e,s)}function n(e,n){u.amazon=e,e||(c&&(console.log("Cancelling Flickr request"),c.cancelRequest(),u.flickr="Cancelled"),t(n),o())}function i(e,n){u.flickr=e,e||t(n),o()}function o(){var t=Object.keys(u);if(t.length===l){var n=t.every(function(e){return null===u[e]});n?Rollbar.info(e.thing+" succeeded."):Rollbar.error(e.thing+" failed",u)}}var s=d3.select(this);r(e,s);var a=null,c=null,l=0,u={};if(e.buyLinkURL||(a=amazonSearch.spacedOutSearchProducts(e,n),l+=1),!e.imageURL){var d=~~(3*Math.random());(d>0||!a)&&(c=flickrSearch.spacedOutSearchImages(e,i),l+=1)}}function r(e,t){var n=t.select(".picture img");if(e.imageURL){n.attr("src",e.imageURL),t.select(".picture").classed("image-loaded",!0);var r=t.select(".picture a");r.attr("href",e.imageAttribution).attr("target","_blank")}}function i(e){a(e);var t=location.protocol+"//"+location.host+"/#/items/checkit/"+e.id,n="Gr8 deal on @nonstopscrshop! "+accessors.description(e)+" "+t,r="http://twitter.com/intent/tweet?text="+encodeURIComponent(n);window.open(r,"_blank")}function o(t){var n=l.draper.addDrape();e(n,[t],s);var r=d3.select(".drape .item");l.draper.addCloseButton(r.node())}function s(e){var t=e.append("div").classed("out-of-stock",!0);t.append("span").text("Out of stock. Sorry!"),t.each(function(e){e.buyLinkURL&&d3.select(this).append("a").attr("href",function(e){return e.buyLinkURL}).attr("target","_blank").text("Try Amazon?")})}function a(e){var t=[[{id:"saveItemOp-"+e.id,op:"saveItem",params:e}]];utils.makeJSONRequest({method:"POST",url:l.warehouseURL,body:JSON.stringify(t),done:function(e,t){console.log(e,t)}})}function c(e,t){function n(e,n){e?t(e):n.length<1||"Got"!==n[0].status?t("Could not get results."):t(null,n[0].value)}var r=[[{id:"getItemOp-"+e,op:"getItem",params:{id:e}}]];utils.makeJSONRequest({method:"POST",url:l.warehouseURL,body:JSON.stringify(r),done:n})}var l={numberOfItemsPerLoad:10,cachedItems:[],merchmaker:createMerchmaker(),requestInProgress:!1,draper:createDraper(),warehouseURL:"http://192.241.250.38:3001"};return l.init=function(){},l.deactivate=function(){window.onscroll=null},l.render=function(){window.onscroll=this.respondToScroll.bind(this);var e=d3.select(".banner"),t=e.select("img");t.empty()&&(t=e.append("img").classed("logo",!0)),document.body.clientWidth>600?t.attr("src","res/nonstopscrollshop.png"):t.attr("src","res/nonstopscrollshop_320.png"),d3.select(".titlebar").text("Non-Stop Scroll Shop! It's your one-stop non-stop scroll shop!"),this.getItems(),"checkit"in this.opts&&this.highlightItem(this.opts.checkit)},l.renderItems=function(n){d3.selectAll(".root > *").each(function(){var e=d3.select(this);e.classed("items-root")||e.remove()});var r=d3.select(".items-root");r.empty()&&(r=d3.select(".root").append("ul").classed("items-root",!0)),e(r,n,t)},l.getItems=function(){this.requestInProgress=!0,this.merchmaker.makeItems(10,function(e,t){t.forEach(function(e){this.cachedItems.push(e)}.bind(this)),this.requestInProgress=!1,this.renderItems(l.cachedItems)}.bind(this))},l.respondToScroll=function(){!this.requestInProgress&&document.body.scrollHeight-window.scrollY<=window.innerHeight&&this.getItems()},l.highlightItem=function(n){c(n,function(n,r){if(n)console.log(n);else{var i=l.draper.addDrape();e(i,[r],t);var o=d3.select(".drape .item");o.style("background-color","hsla("+~~(360*Math.random())+", 43%, 71%, 1)"),l.draper.addCloseButton(o.node())}})},l.init(),l}var utils=function(){function e(e){return e[~~(Math.random()*e.length)]}function t(e){var t="";return e.length>0&&(t=e.charAt(0).toUpperCase()),e.length>1&&(t+=e.slice(1)),t}function n(t){for(var n="",r=0;t>r;++r)n+=e(s);return n}function r(e){function t(){n.abort(),clearTimeout(r),e.done("Timed out",null)}var n=new XMLHttpRequest;n.open(e.method,e.url),"POST"===e.method?n.setRequestHeader("content-type","application/json"):"GET"===e.method&&n.setRequestHeader("accept","application/json");var r=null;return n.onload=function(){if(clearTimeout(r),200===this.status){var t=JSON.parse(this.responseText);e.done(null,t)}else e.done("Error while making request. XHR status: "+this.status,null)},n.send("POST"===e.method?e.body:void 0),e.timeLimit>0&&(r=setTimeout(t,e.timeLimit)),{url:e.url,cancelRequest:t}}function i(e,t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}function o(e,t){function n(){function n(){var e=r.pop();e&&e.fn?(e.fn.apply(e.context,e.args),setTimeout(n,t)):i=!1}r.unshift({fn:e,context:this,args:arguments}),i||(i=!0,n())}var r=[],i=!1;return n}var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split("");return{pickFromArrayAtRandom:e,convertToPoorMansTitleCase:t,randomId:n,makeJSONRequest:r,defaults:i,space:o}}(),accessors={id:function(e){return e.id},label:function(e){return e.label},date:function(e){return e.date},localeDate:function(e){var t=new Date(e.date),n=t.toLocaleTimeString();return n=n.replace(/:\d+ /," "),t.toLocaleDateString()+" "+n},description:function(e){var t="";return t=e.adjective?e.postfixAdjective?utils.convertToPoorMansTitleCase(e.thing)+", "+e.adjective:utils.convertToPoorMansTitleCase(e.adjective)+" "+e.thing:utils.convertToPoorMansTitleCase(e.thing),e.quantity&&(t+=": "+e.quantity+" "+e.units),t},getDescriptionHTML:function(e){var t="";return t=e.adjective?e.postfixAdjective?'<span class="thing">'+utils.convertToPoorMansTitleCase(e.thing)+'</span>, <span class="adjective">'+e.adjective+"</span>":'<span class="adjective">'+utils.convertToPoorMansTitleCase(e.adjective)+' </span> <span class="thing">'+e.thing+"</span>":'<span class="thing">'+utils.convertToPoorMansTitleCase(e.thing)+"</span>",e.quantity&&(t+='<div class="quantity">'+e.quantity+' <span class="units">'+e.units+"</span></div>"),t},cost:function(e){return"$"+e.cost},thing:function(e){return e.thing},onClick:function(e){return e.click()}},CryptoJS=CryptoJS||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;e>i;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;e>i;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;t>r;r+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),a=n.enc={},c=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;e>r;r++){var i=t[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return new s.init(n,t/2)}},l=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;e>r;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-8*(r%4);return new s.init(n,t)}},u=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},d=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o),a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(t=a*o,i=e.min(4*t,i),t){for(var c=0;t>c;c+=o)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=i}return new s.init(c,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=n.algo={};return n}(Math);!function(e){for(var t=CryptoJS,n=t.lib,r=n.WordArray,i=n.Hasher,n=t.algo,o=[],s=[],a=function(e){return 4294967296*(e-(0|e))|0},c=2,l=0;64>l;){var u;e:{u=c;for(var d=e.sqrt(u),h=2;d>=h;h++)if(!(u%h)){u=!1;break e}u=!0}u&&(8>l&&(o[l]=a(e.pow(c,.5))),s[l]=a(e.pow(c,1/3)),l++),c++}var p=[],n=n.SHA256=i.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],c=n[4],l=n[5],u=n[6],d=n[7],h=0;64>h;h++){if(16>h)p[h]=0|e[t+h];else{var f=p[h-15],m=p[h-2];p[h]=((f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3)+p[h-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+p[h-16]}f=d+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&l^~c&u)+s[h]+p[h],m=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),d=u,u=l,l=c,c=a+f|0,a=o,o=i,i=r,r=f+m|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0,n[5]=n[5]+l|0,n[6]=n[6]+u|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=e.floor(r/4294967296),n[(i+64>>>9<<4)+15]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(n),t.HmacSHA256=i._createHmacHelper(n)}(Math),function(){var e=CryptoJS,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,i=4*r;n.sigBytes>i&&(n=e.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),s=this._iKey=n.clone(),a=o.words,c=s.words,l=0;r>l;l++)a[l]^=1549556828,c[l]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){{var e=CryptoJS,t=e.lib,n=t.WordArray,r=e.enc;r.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;n>o;o+=3)for(var s=t[o>>>2]>>>24-o%4*8&255,a=t[o+1>>>2]>>>24-(o+1)%4*8&255,c=t[o+2>>>2]>>>24-(o+2)%4*8&255,l=s<<16|a<<8|c,u=0;4>u&&n>o+.75*u;u++)i.push(r.charAt(l>>>6*(3-u)&63));var d=r.charAt(64);if(d)for(;i.length%4;)i.push(d);return i.join("")},parse:function(e){var t=e.length,r=this._map,i=r.charAt(64);if(i){var o=e.indexOf(i);-1!=o&&(t=o)}for(var s=[],a=0,c=0;t>c;c++)if(c%4){var l=r.indexOf(e.charAt(c-1))<<c%4*2,u=r.indexOf(e.charAt(c))>>>6-c%4*2;s[a>>>2]|=(l|u)<<24-a%4*8,a++}return n.create(s,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}}();var amazonSearch=createAmazonSearch(),flickrSearch=createFlickrSearch(),theRouter=createRouter();